\documentclass{beamer}\usepackage[]{graphicx}\usepackage[]{color}
%% maxwidth is the original width if it is less than linewidth
%% otherwise use linewidth (to make sure the graphics do not exceed the margin)
\makeatletter
\def\maxwidth{ %
  \ifdim\Gin@nat@width>\linewidth
    \linewidth
  \else
    \Gin@nat@width
  \fi
}
\makeatother

\definecolor{fgcolor}{rgb}{0.345, 0.345, 0.345}
\newcommand{\hlnum}[1]{\textcolor[rgb]{0.686,0.059,0.569}{#1}}%
\newcommand{\hlstr}[1]{\textcolor[rgb]{0.192,0.494,0.8}{#1}}%
\newcommand{\hlcom}[1]{\textcolor[rgb]{0.678,0.584,0.686}{\textit{#1}}}%
\newcommand{\hlopt}[1]{\textcolor[rgb]{0,0,0}{#1}}%
\newcommand{\hlstd}[1]{\textcolor[rgb]{0.345,0.345,0.345}{#1}}%
\newcommand{\hlkwa}[1]{\textcolor[rgb]{0.161,0.373,0.58}{\textbf{#1}}}%
\newcommand{\hlkwb}[1]{\textcolor[rgb]{0.69,0.353,0.396}{#1}}%
\newcommand{\hlkwc}[1]{\textcolor[rgb]{0.333,0.667,0.333}{#1}}%
\newcommand{\hlkwd}[1]{\textcolor[rgb]{0.737,0.353,0.396}{\textbf{#1}}}%

\usepackage{framed}
\makeatletter
\newenvironment{kframe}{%
 \def\at@end@of@kframe{}%
 \ifinner\ifhmode%
  \def\at@end@of@kframe{\end{minipage}}%
  \begin{minipage}{\columnwidth}%
 \fi\fi%
 \def\FrameCommand##1{\hskip\@totalleftmargin \hskip-\fboxsep
 \colorbox{shadecolor}{##1}\hskip-\fboxsep
     % There is no \\@totalrightmargin, so:
     \hskip-\linewidth \hskip-\@totalleftmargin \hskip\columnwidth}%
 \MakeFramed {\advance\hsize-\width
   \@totalleftmargin\z@ \linewidth\hsize
   \@setminipage}}%
 {\par\unskip\endMakeFramed%
 \at@end@of@kframe}
\makeatother

\definecolor{shadecolor}{rgb}{.97, .97, .97}
\definecolor{messagecolor}{rgb}{0, 0, 0}
\definecolor{warningcolor}{rgb}{1, 0, 1}
\definecolor{errorcolor}{rgb}{1, 0, 0}
\newenvironment{knitrout}{}{} % an empty environment to be redefined in TeX

\usepackage{alltt}
\usetheme[compress]{Singapore}
\useoutertheme{miniframes}

% \documentclass{beamer}
%\usetheme{Warsaw}

% Pour les documents en francais...
	\usepackage[latin1]{inputenc}
	\usepackage[french]{babel}
	\usepackage[french]{varioref}

% Math?matiques
	\usepackage{amsmath}

% Caracteres speciaux suppl?mentaires
	\usepackage{latexsym,amsfonts}

% A documenter
	\usepackage{moreverb}

% Macros pour les paquets
	\usepackage{array}  			% N?cessaires pour les tableaux de la macro Excel.

% Outil suppl?mentaire pour les tableaux
	\usepackage{multirow}
	\usepackage{booktabs}
	\usepackage{xcolor} % alternating row colors in table, incompatible avec certains modules
	\usepackage{longtable}
	\usepackage{colortbl}

% Pour ins?rer des graphiques
	\usepackage{graphicx} 			% Graphique simples
	\usepackage{subfigure}			% Graphiques multiples

% Pour ins?rer des couleurs
	\usepackage{color}

% Rotation des objets et des pages
%	\usepackage{rotating}
%	\usepackage{lscape}

% Pour insrer du code source, LaTeX ou SAS par exemple.
	\usepackage{verbatim}
        \usepackage{moreverb}
	\usepackage{listings}
	\usepackage{fancyvrb}

%	\lstset{language=SAS,numbers=left}		% Par dfaut le listing est en SAS

% Pour ins?rer des hyperliens
  \usepackage{hyperref}

% American Psychological Association (for bibliographic references).
	\usepackage{apacite}

% Pour l'utilisation des macros
	\usepackage{xspace}

% Pour l'utilisation de notes en fin de document.
%	\usepackage{endnotes}

% Array
%	\usepackage{multirow}
%	\usepackage{booktabs}

% Rotation
%	\usepackage{rotating}

% En t?tes et pieds de pages
%	\usepackage{fancyhdr}
%	\usepackage{lastpage}


% Page layout

% By LaTeX commands
%\setlength{\oddsidemargin}{0cm}
%\setlength{\textwidth}{16cm}
%\setlength{\textheight}{24cm}
%\setlength{\topmargin}{-1cm}
%\setlength{\marginparsep}{0.2cm}

% fancyheader parameters
%\pagestyle{fancy}

%\fancyfoot[L]{{\small Formation \LaTeX, DEPP}}
%\fancyfoot[c]{}
%\fancyfoot[R]{{\small \thepage/\pageref{LastPage}}}

%\fancyhead[L]{}
%\fancyhead[c]{}
%\fancyhead[R]{}

% Pour ins?rer des dessins de Linux
\newcommand{\LinuxA}{\includegraphics[height=0.5cm]{Graphiques/linux.png}}
\newcommand{\LinuxB}{\includegraphics[height=0.5cm]{Graphiques/linux.png}\xspace}

% Macro pour les petits dessins pour les diff?rents OS.
\newcommand{\Windows}{\emph{Windows}\xspace}
\newcommand{\Mac}{\emph{Mac OS X}\xspace}
\newcommand{\Linux}{\emph{Linux}\xspace}
\newcommand{\MikTeX}{MiK\tex\xspace}
\newcommand{\latex}{\LaTeX\xspace}


\newcommand{\df}{\emph{data.frame}\xspace}
\newcommand{\liste}{\emph{list}\xspace}
\newcommand{\cad}{c'est-?-dire\xspace}

% Titre
\title{Introduction à R}
\author{Pascal Bessonneau}
%\institute{DEPP}
\date{06/2015}
\subtitle{Exercices sur les données des mairies}


\newcommand{\hreff}[2]{\underline{\href{#1}{#2}\xspace}}



\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\begin{document}

\begin{frame}
	\maketitle
\end{frame}

\begin{frame}
	\tableofcontents
\end{frame}

\section{La sécurité informatique dans les mairies}

\begin{frame}[containsverbatim]
  \frametitle{Source}

  Ces données proviennent du site \href{data.gouv.fr}{data.gouv.fr}.
  
  Ce sont des données sur la sécurisation des sites web des mairies.

\end{frame}

\begin{frame}[containsverbatim]
  \frametitle{Chargement}

\begin{knitrout}\footnotesize
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{> }\hlstd{mairies} \hlkwb{<-} \hlkwd{read.csv}\hlstd{(}\hlstr{"data/ville_secu_informatique_centroide.csv"}
\hlstd{+ }                    \hlstd{,} \hlkwc{fileEncoding} \hlstd{=} \hlstr{"UTF8"}
\hlstd{+ }                    \hlstd{,} \hlkwc{stringsAsFactors} \hlstd{= F}
\hlstd{+ }                    \hlstd{)}
\end{alltt}
\end{kframe}
\end{knitrout}

\end{frame}

\begin{frame}[containsverbatim]
  \frametitle{Résumé}

\begin{knitrout}\footnotesize
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{> }\hlkwd{summary}\hlstd{(mairies)}
\end{alltt}
\begin{verbatim}
##    Commune           Code.Insee       
##  Length:14220       Length:14220      
##  Class :character   Class :character  
##  Mode  :character   Mode  :character  
##                                       
##                                       
##                                       
##      url             Catégorie        
##  Length:14220       Length:14220      
##  Class :character   Class :character  
##  Mode  :character   Mode  :character  
##                                       
##                                       
##                                       
##    Population          Site          
##  Min.   :     19   Length:14220      
##  1st Qu.:    565   Class :character  
##  Median :   1176   Mode  :character  
##  Mean   :   4123                     
##  3rd Qu.:   2798                     
##  Max.   :2243833                     
##     https             Serveur         
##  Length:14220       Length:14220      
##  Class :character   Class :character  
##  Mode  :character   Mode  :character  
##                                       
##                                       
##                                       
##  Version.du.serveur Application       
##  Length:14220       Length:14220      
##  Class :character   Class :character  
##  Mode  :character   Mode  :character  
##                                       
##                                       
##                                       
##  Version.de.l.application   Langage         
##  Length:14220             Length:14220      
##  Class :character         Class :character  
##  Mode  :character         Mode  :character  
##                                             
##                                             
##                                             
##  Version.du.langage    Latitude     
##  Length:14220       Min.   :-21.34  
##  Class :character   1st Qu.: 45.08  
##  Mode  :character   Median : 47.08  
##                     Mean   : 46.58  
##                     3rd Qu.: 48.64  
##                     Max.   : 51.07  
##    Longitude       
##  Min.   :-61.7797  
##  1st Qu.:  0.5318  
##  Median :  2.5673  
##  Mean   :  2.5214  
##  3rd Qu.:  4.8793  
##  Max.   : 55.7545
\end{verbatim}
\end{kframe}
\end{knitrout}

\end{frame}

\begin{frame}[containsverbatim]
  \frametitle{Résumé}

\begin{knitrout}\footnotesize
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{> }\hlkwd{prop.table}\hlstd{(}\hlkwd{table}\hlstd{(mairies}\hlopt{$}\hlstd{Site))}
\end{alltt}
\begin{verbatim}
## 
## oui 
##   1
\end{verbatim}
\begin{alltt}
\hlstd{> }\hlkwd{prop.table}\hlstd{(}\hlkwd{table}\hlstd{(mairies}\hlopt{$}\hlstd{Site))}\hlopt{*}\hlnum{100}
\end{alltt}
\begin{verbatim}
## 
## oui 
## 100
\end{verbatim}
\end{kframe}
\end{knitrout}

\end{frame}

\begin{frame}[containsverbatim]
  \frametitle{Questions}
  
  \begin{itemize}
    \item Quelle est la proportion de mairies avec un accès HTTPS ? 
    \item Quelle est la proportion de chaque catégorie ?
    \item Quelle est la proportion de chaque type de serveur ?
    \item Faire le tableau croisé HTTPS/Serveur.
    \item Faire le tableau croisé Serveur/catégorie.
    \item Est-ce que la taille moyenne de la population varie selon le type de serveur ?
    \item Est-ce que la taille moyenne de la population varie en fonction du type de langage ?
    \item Est-ce que la taille moyenne de la population varie en fonction du type de langage ?
  \end{itemize}


\end{frame}

\begin{frame}[containsverbatim]
  \frametitle{Questions}
  
Quelle est la proportion de mairies avec un accès HTTPS ? 
\begin{knitrout}\footnotesize
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{> }\hlkwd{prop.table}\hlstd{(}\hlkwd{table}\hlstd{(mairies}\hlopt{$}\hlstd{https))}\hlopt{*}\hlnum{100}
\end{alltt}
\begin{verbatim}
## 
##       non       oui 
## 98.924051  1.075949
\end{verbatim}
\end{kframe}
\end{knitrout}

\end{frame}

\begin{frame}[containsverbatim]
  \frametitle{Questions}

Quelle est la proportion de chaque catégorie ?
\begin{knitrout}\footnotesize
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{> }\hlkwd{prop.table}\hlstd{(}\hlkwd{table}\hlstd{(mairies}\hlopt{$}\hlstd{Catégorie))}\hlopt{*}\hlnum{100}
\end{alltt}
\begin{verbatim}
## 
##                                              À jour 
##                                            7.144866 
## Informations masquées (vulnérabilités pas exposées) 
##                                           27.208158 
##                        Niveau de sécurité incertain 
##                                           19.099859 
##                                          Pas à jour 
##                                           46.547117
\end{verbatim}
\end{kframe}
\end{knitrout}
\end{frame}

\begin{frame}[containsverbatim]
  \frametitle{Questions}

Quelle est la proportion de chaque catégorie ?
\begin{knitrout}\footnotesize
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{> }\hlkwd{prop.table}\hlstd{(}\hlkwd{table}\hlstd{(mairies}\hlopt{$}\hlstd{Catégorie))}\hlopt{*}\hlnum{100}
\end{alltt}
\begin{verbatim}
## 
##                                              À jour 
##                                            7.144866 
## Informations masquées (vulnérabilités pas exposées) 
##                                           27.208158 
##                        Niveau de sécurité incertain 
##                                           19.099859 
##                                          Pas à jour 
##                                           46.547117
\end{verbatim}
\end{kframe}
\end{knitrout}
\end{frame}

\begin{frame}[containsverbatim]
  \frametitle{Questions}

Quelle est la proportion de chaque type de serveur ?
\begin{knitrout}\footnotesize
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{> }\hlkwd{prop.table}\hlstd{(}\hlkwd{table}\hlstd{(mairies}\hlopt{$}\hlstd{Serveur))}\hlopt{*}\hlnum{100}
\end{alltt}
\begin{verbatim}
## 
##        Apache Apache Tomcat        Google 
##   76.49085795    0.16174402    0.42897328 
##        Icodia           IIS      Inconnue 
##    0.08438819    8.07313643    1.61040788 
##       Lighttp     LiteSpeed  Lotus-Domino 
##    1.34317862    0.26722925    0.04922644 
##         Nginx      o2switch         SiteW 
##   10.35161744    0.30942335    0.33052039 
##       Tengine           Wix        WMaker 
##    0.06329114    0.26722925    0.16877637
\end{verbatim}
\end{kframe}
\end{knitrout}
\end{frame}

\begin{frame}[containsverbatim]
  \frametitle{Questions}

Quelle est la proportion de chaque type de serveur ?
\begin{knitrout}\footnotesize
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{> }\hlkwd{prop.table}\hlstd{(}\hlkwd{table}\hlstd{(mairies}\hlopt{$}\hlstd{Serveur,mairies}\hlopt{$}\hlstd{https))}\hlopt{*}\hlnum{100}
\end{alltt}
\begin{verbatim}
##                
##                          non          oui
##   Apache        75.787623066  0.703234880
##   Apache Tomcat  0.154711674  0.007032349
##   Google         0.246132208  0.182841069
##   Icodia         0.084388186  0.000000000
##   IIS            8.073136428  0.000000000
##   Inconnue       1.547116737  0.063291139
##   Lighttp        1.343178622  0.000000000
##   LiteSpeed      0.267229255  0.000000000
##   Lotus-Domino   0.049226442  0.000000000
##   Nginx         10.288326301  0.063291139
##   o2switch       0.309423347  0.000000000
##   SiteW          0.323488045  0.007032349
##   Tengine        0.063291139  0.000000000
##   Wix            0.218002813  0.049226442
##   WMaker         0.168776371  0.000000000
\end{verbatim}
\begin{alltt}
\hlstd{> }\hlkwd{prop.table}\hlstd{(}\hlkwd{table}\hlstd{(mairies}\hlopt{$}\hlstd{Serveur,mairies}\hlopt{$}\hlstd{https),}\hlnum{1}\hlstd{)}\hlopt{*}\hlnum{100}
\end{alltt}
\begin{verbatim}
##                
##                         non         oui
##   Apache         99.0806288   0.9193712
##   Apache Tomcat  95.6521739   4.3478261
##   Google         57.3770492  42.6229508
##   Icodia        100.0000000   0.0000000
##   IIS           100.0000000   0.0000000
##   Inconnue       96.0698690   3.9301310
##   Lighttp       100.0000000   0.0000000
##   LiteSpeed     100.0000000   0.0000000
##   Lotus-Domino  100.0000000   0.0000000
##   Nginx          99.3885870   0.6114130
##   o2switch      100.0000000   0.0000000
##   SiteW          97.8723404   2.1276596
##   Tengine       100.0000000   0.0000000
##   Wix            81.5789474  18.4210526
##   WMaker        100.0000000   0.0000000
\end{verbatim}
\end{kframe}
\end{knitrout}
\end{frame}

\begin{frame}[containsverbatim]
  \frametitle{Questions}

Quelle est la proportion de chaque type de serveur ?
\begin{knitrout}\footnotesize
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{> }\hlkwd{prop.table}\hlstd{(}\hlkwd{table}\hlstd{(mairies}\hlopt{$}\hlstd{Serveur,mairies}\hlopt{$}\hlstd{Catégorie))}\hlopt{*}\hlnum{100}
\end{alltt}
\begin{verbatim}
##                
##                       À jour
##   Apache         6.772151899
##   Apache Tomcat  0.000000000
##   Google         0.000000000
##   Icodia         0.000000000
##   IIS            0.021097046
##   Inconnue       0.028129395
##   Lighttp        0.000000000
##   LiteSpeed      0.112517581
##   Lotus-Domino   0.000000000
##   Nginx          0.154711674
##   o2switch       0.035161744
##   SiteW          0.021097046
##   Tengine        0.000000000
##   Wix            0.000000000
##   WMaker         0.000000000
##                
##                 Informations masquées (vulnérabilités pas exposées)
##   Apache                                               22.180028129
##   Apache Tomcat                                         0.161744023
##   Google                                                0.428973277
##   Icodia                                                0.070323488
##   IIS                                                   0.000000000
##   Inconnue                                              1.237693390
##   Lighttp                                               0.049226442
##   LiteSpeed                                             0.049226442
##   Lotus-Domino                                          0.049226442
##   Nginx                                                 2.341772152
##   o2switch                                              0.070323488
##   SiteW                                                 0.084388186
##   Tengine                                               0.049226442
##   Wix                                                   0.267229255
##   WMaker                                                0.168776371
##                
##                 Niveau de sécurité incertain
##   Apache                        10.534458509
##   Apache Tomcat                  0.000000000
##   Google                         0.000000000
##   Icodia                         0.000000000
##   IIS                            7.672292546
##   Inconnue                       0.049226442
##   Lighttp                        0.007032349
##   LiteSpeed                      0.000000000
##   Lotus-Domino                   0.000000000
##   Nginx                          0.639943741
##   o2switch                       0.126582278
##   SiteW                          0.070323488
##   Tengine                        0.000000000
##   Wix                            0.000000000
##   WMaker                         0.000000000
##                
##                   Pas à jour
##   Apache        37.004219409
##   Apache Tomcat  0.000000000
##   Google         0.000000000
##   Icodia         0.014064698
##   IIS            0.379746835
##   Inconnue       0.295358650
##   Lighttp        1.286919831
##   LiteSpeed      0.105485232
##   Lotus-Domino   0.000000000
##   Nginx          7.215189873
##   o2switch       0.077355837
##   SiteW          0.154711674
##   Tengine        0.014064698
##   Wix            0.000000000
##   WMaker         0.000000000
\end{verbatim}
\begin{alltt}
\hlstd{> }\hlstd{res} \hlkwb{<-} \hlkwd{prop.table}\hlstd{(}\hlkwd{table}\hlstd{(mairies}\hlopt{$}\hlstd{Serveur,mairies}\hlopt{$}\hlstd{Catégorie),}\hlnum{1}\hlstd{)}\hlopt{*}\hlnum{100}
\hlstd{> }\hlkwd{write.csv2}\hlstd{(}\hlkwd{as.data.frame.matrix}\hlstd{(res),}\hlkwc{file}\hlstd{=}\hlstr{"data/resultats1.csv"}\hlstd{)}
\end{alltt}
\end{kframe}
\end{knitrout}
\end{frame}

\begin{frame}[containsverbatim]
  \frametitle{Questions}

Est-ce que la taille moyenne de la population varie selon le type de serveur ?
\begin{knitrout}\footnotesize
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{> }\hlstd{(tmp} \hlkwb{<-} \hlkwd{tapply}\hlstd{(mairies}\hlopt{$}\hlstd{Population,mairies}\hlopt{$}\hlstd{Serveur,mean))}
\end{alltt}
\begin{verbatim}
##        Apache Apache Tomcat        Google 
##     3945.7721    58853.7826      879.1803 
##        Icodia           IIS      Inconnue 
##     2457.6667     2213.8841    18754.1048 
##       Lighttp     LiteSpeed  Lotus-Domino 
##      746.8482     2203.5526    15075.0000 
##         Nginx      o2switch         SiteW 
##     4563.7548     1374.8409     2070.4468 
##       Tengine           Wix        WMaker 
##     2991.6667      828.5263     7045.2917
\end{verbatim}
\end{kframe}
\end{knitrout}
\end{frame}

\begin{frame}[containsverbatim]
  \frametitle{Questions}

Est-ce que la taille moyenne de la population varie selon le type de serveur ?
\begin{knitrout}\footnotesize
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{> }\hlkwd{barplot}\hlstd{(tmp,}\hlkwc{las}\hlstd{=}\hlnum{3}\hlstd{)}
\end{alltt}
\end{kframe}

{\centering \resizebox{!}{0.6\textheight}{\includegraphics[width=\textwidth]{graphiques/beamer-unnamed-chunk-11-1} } 

}



\end{knitrout}
\end{frame}

\begin{frame}[containsverbatim]
  \frametitle{Questions}

Est-ce que la taille moyenne de la population varie selon le type de serveur ?
\begin{knitrout}\footnotesize
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{> }\hlkwd{boxplot}\hlstd{(mairies}\hlopt{$}\hlstd{Population} \hlopt{~} \hlstd{mairies}\hlopt{$}\hlstd{Serveur,}\hlkwc{las}\hlstd{=}\hlnum{3}\hlstd{)}
\end{alltt}
\end{kframe}

{\centering \resizebox{!}{0.6\textheight}{\includegraphics[width=\textwidth]{graphiques/beamer-unnamed-chunk-12-1} } 

}



\end{knitrout}
\end{frame}

\begin{frame}[containsverbatim]
  \frametitle{Questions}

Est-ce que la taille moyenne de la population varie selon le type de serveur ?
\begin{knitrout}\footnotesize
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{> }\hlkwd{boxplot}\hlstd{(mairies}\hlopt{$}\hlstd{Population} \hlopt{~} \hlstd{mairies}\hlopt{$}\hlstd{Serveur,}\hlkwc{las}\hlstd{=}\hlnum{3}\hlstd{,}\hlkwc{ylim}\hlstd{=}\hlkwd{c}\hlstd{(}\hlnum{0}\hlstd{,}\hlnum{50000}\hlstd{))}
\end{alltt}
\end{kframe}

{\centering \resizebox{!}{0.6\textheight}{\includegraphics[width=\textwidth]{graphiques/beamer-unnamed-chunk-13-1} } 

}



\end{knitrout}
\end{frame}


\begin{frame}[containsverbatim]
  \frametitle{Création de la variable département}
  
  substr est une fonction qui permet de sélectionner une partie de la chaine 
  de caractère.
  
\begin{knitrout}\footnotesize
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{> }\hlstd{mairies}\hlopt{$}\hlstd{dept} \hlkwb{<-} \hlkwd{substr}\hlstd{(mairies}\hlopt{$}\hlstd{Code.Insee,}\hlnum{1}\hlstd{,}\hlnum{2}\hlstd{)}
\end{alltt}
\end{kframe}
\end{knitrout}

\end{frame}

\begin{frame}[containsverbatim]
  \frametitle{Création de la variable département}
  
\begin{knitrout}\footnotesize
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{> }\hlkwd{prop.table}\hlstd{(}\hlkwd{table}\hlstd{(mairies}\hlopt{$}\hlstd{dept,mairies}\hlopt{$}\hlstd{Catégorie),}\hlnum{1}\hlstd{)}\hlopt{*}\hlnum{100}
\end{alltt}
\begin{verbatim}
##     
##          À jour
##   01  15.319149
##   02   4.511278
##   03   3.225806
##   04   5.405405
##   05   7.462687
##   06   3.278689
##   07  43.030303
##   08   4.545455
##   09   6.060606
##   10   1.298701
##   11   5.072464
##   12   1.538462
##   13   6.837607
##   14   6.521739
##   15   2.531646
##   16   2.678571
##   17   4.000000
##   18  10.416667
##   19   4.424779
##   21   6.493506
##   22   4.733728
##   23   1.886792
##   24   4.850746
##   25   5.882353
##   26  10.493827
##   27   5.681818
##   28   4.794521
##   29   9.049774
##   2A   5.714286
##   2B  16.666667
##   30   6.629834
##   31   5.069124
##   32   2.631579
##   33   6.934307
##   34   7.389163
##   35  10.212766
##   36  14.925373
##   37  12.162162
##   38  13.314448
##   39   7.272727
##   40   0.877193
##   41   5.925926
##   42  13.157895
##   43   4.761905
##   44   3.061224
##   45   7.843137
##   46   1.834862
##   47   4.597701
##   48  11.111111
##   49   3.265306
##   50   5.882353
##   51   8.510638
##   52   4.878049
##   53   4.477612
##   54   6.358382
##   55  11.290323
##   56   3.000000
##   57   8.965517
##   58   1.219512
##   59   6.666667
##   60   5.485232
##   61  13.636364
##   62   6.129032
##   63  29.255319
##   64   2.614379
##   65   7.407407
##   66   3.100775
##   67   9.285714
##   68   2.358491
##   69  10.434783
##   70   8.860759
##   71   1.785714
##   72  11.940299
##   73   7.881773
##   74   5.357143
##   75   0.000000
##   76   3.435115
##   77   8.754209
##   78   3.846154
##   79   4.587156
##   80   1.324503
##   81   4.838710
##   82   1.063830
##   83  13.138686
##   84   6.194690
##   85   5.069124
##   86   5.185185
##   87   8.333333
##   88   5.405405
##   89   4.137931
##   90   2.564103
##   91   4.081633
##   92   0.000000
##   93   2.500000
##   94   0.000000
##   95   9.589041
##   97  10.389610
##     
##      Informations masquées (vulnérabilités pas exposées)
##   01                                           15.744681
##   02                                           24.060150
##   03                                           24.193548
##   04                                           39.189189
##   05                                           32.835821
##   06                                           20.491803
##   07                                           20.606061
##   08                                           16.666667
##   09                                           24.242424
##   10                                           36.363636
##   11                                           40.579710
##   12                                           13.076923
##   13                                           32.478632
##   14                                           26.086957
##   15                                           21.518987
##   16                                           22.321429
##   17                                           20.000000
##   18                                           32.291667
##   19                                           46.017699
##   21                                           58.441558
##   22                                           17.751479
##   23                                           26.415094
##   24                                           21.641791
##   25                                           32.679739
##   26                                           25.925926
##   27                                           23.295455
##   28                                           36.986301
##   29                                           20.814480
##   2A                                           45.714286
##   2B                                           24.242424
##   30                                           19.889503
##   31                                           37.327189
##   32                                           19.736842
##   33                                           19.343066
##   34                                           25.615764
##   35                                           21.702128
##   36                                           31.343284
##   37                                           19.594595
##   38                                           20.396601
##   39                                           28.181818
##   40                                           11.403509
##   41                                           31.851852
##   42                                           16.842105
##   43                                           27.380952
##   44                                           21.428571
##   45                                           22.875817
##   46                                           12.844037
##   47                                           32.183908
##   48                                           20.000000
##   49                                           15.102041
##   50                                           16.339869
##   51                                           19.858156
##   52                                           46.341463
##   53                                           17.910448
##   54                                           21.965318
##   55                                           22.580645
##   56                                           22.000000
##   57                                           32.068966
##   58                                           54.878049
##   59                                           25.217391
##   60                                           35.021097
##   61                                           19.696970
##   62                                           31.290323
##   63                                           17.553191
##   64                                           20.915033
##   65                                           22.222222
##   66                                           28.682171
##   67                                           25.714286
##   68                                           43.867925
##   69                                           25.652174
##   70                                           27.848101
##   71                                           57.589286
##   72                                           31.343284
##   73                                           22.167488
##   74                                           42.410714
##   75                                          100.000000
##   76                                           32.824427
##   77                                           28.956229
##   78                                           26.442308
##   79                                           24.770642
##   80                                           30.463576
##   81                                           51.612903
##   82                                            6.382979
##   83                                           24.817518
##   84                                           24.778761
##   85                                           34.101382
##   86                                           13.333333
##   87                                           17.708333
##   88                                           21.621622
##   89                                           47.586207
##   90                                           43.589744
##   91                                           29.251701
##   92                                           40.000000
##   93                                           22.500000
##   94                                           36.170213
##   95                                           33.561644
##   97                                           27.272727
##     
##      Niveau de sécurité incertain Pas à jour
##   01                    14.468085  54.468085
##   02                    17.293233  54.135338
##   03                    46.774194  25.806452
##   04                    12.162162  43.243243
##   05                    13.432836  46.268657
##   06                    28.688525  47.540984
##   07                    10.303030  26.060606
##   08                    22.727273  56.060606
##   09                    13.636364  56.060606
##   10                    15.584416  46.753247
##   11                    24.637681  29.710145
##   12                    52.307692  33.076923
##   13                    18.803419  41.880342
##   14                    17.934783  49.456522
##   15                    21.518987  54.430380
##   16                    26.785714  48.214286
##   17                    17.142857  58.857143
##   18                    11.458333  45.833333
##   19                    14.159292  35.398230
##   21                    10.389610  24.675325
##   22                    17.751479  59.763314
##   23                    16.981132  54.716981
##   24                    48.507463  25.000000
##   25                     8.496732  52.941176
##   26                    11.111111  52.469136
##   27                    21.022727  50.000000
##   28                    18.493151  39.726027
##   29                    10.859729  59.276018
##   2A                    11.428571  37.142857
##   2B                     9.090909  50.000000
##   30                    18.232044  55.248619
##   31                    17.050691  40.552995
##   32                    21.052632  56.578947
##   33                    17.883212  55.839416
##   34                    13.300493  53.694581
##   35                    29.787234  38.297872
##   36                     8.955224  44.776119
##   37                    10.810811  57.432432
##   38                    17.280453  49.008499
##   39                    24.545455  40.000000
##   40                    64.035088  23.684211
##   41                    11.851852  50.370370
##   42                    10.526316  59.473684
##   43                    10.714286  57.142857
##   44                    29.591837  45.918367
##   45                    13.725490  55.555556
##   46                    48.623853  36.697248
##   47                    20.689655  42.528736
##   48                     6.666667  62.222222
##   49                    17.959184  63.673469
##   50                    39.215686  38.562092
##   51                    16.312057  55.319149
##   52                     9.756098  39.024390
##   53                     2.238806  75.373134
##   54                    25.433526  46.242775
##   55                    20.967742  45.161290
##   56                    16.000000  59.000000
##   57                    11.379310  47.586207
##   58                     9.756098  34.146341
##   59                    14.202899  53.913043
##   60                    14.767932  44.725738
##   61                    21.212121  45.454545
##   62                    21.612903  40.967742
##   63                    14.893617  38.297872
##   64                    16.993464  59.477124
##   65                    14.814815  55.555556
##   66                    24.031008  44.186047
##   67                    23.571429  41.428571
##   68                    12.735849  41.037736
##   69                    10.000000  53.913043
##   70                     3.797468  59.493671
##   71                     6.696429  33.928571
##   72                    12.686567  44.029851
##   73                    21.182266  48.768473
##   74                    12.053571  40.178571
##   75                     0.000000   0.000000
##   76                    19.847328  43.893130
##   77                    12.794613  49.494949
##   78                    33.173077  36.538462
##   79                    21.100917  49.541284
##   80                    13.907285  54.304636
##   81                     4.032258  39.516129
##   82                    62.765957  29.787234
##   83                    21.167883  40.875912
##   84                    21.238938  47.787611
##   85                    18.433180  42.396313
##   86                    14.814815  66.666667
##   87                    17.708333  56.250000
##   88                    31.531532  41.441441
##   89                    13.103448  35.172414
##   90                    15.384615  38.461538
##   91                    12.925170  53.741497
##   92                    28.571429  31.428571
##   93                    22.500000  52.500000
##   94                    21.276596  42.553191
##   95                    30.136986  26.712329
##   97                    14.285714  48.051948
\end{verbatim}
\begin{alltt}
\hlstd{> }\hlstd{mairies}\hlopt{$}\hlstd{a.jour} \hlkwb{<-} \hlstd{mairies}\hlopt{$}\hlstd{Catégorie} \hlopt{==} \hlstr{"À jour"}
\hlstd{> }\hlstd{(res} \hlkwb{<-} \hlkwd{prop.table}\hlstd{(}\hlkwd{table}\hlstd{(mairies}\hlopt{$}\hlstd{dept,mairies}\hlopt{$}\hlstd{a.jour),}\hlnum{1}\hlstd{)}\hlopt{*}\hlnum{100}\hlstd{)}
\end{alltt}
\begin{verbatim}
##     
##           FALSE       TRUE
##   01  84.680851  15.319149
##   02  95.488722   4.511278
##   03  96.774194   3.225806
##   04  94.594595   5.405405
##   05  92.537313   7.462687
##   06  96.721311   3.278689
##   07  56.969697  43.030303
##   08  95.454545   4.545455
##   09  93.939394   6.060606
##   10  98.701299   1.298701
##   11  94.927536   5.072464
##   12  98.461538   1.538462
##   13  93.162393   6.837607
##   14  93.478261   6.521739
##   15  97.468354   2.531646
##   16  97.321429   2.678571
##   17  96.000000   4.000000
##   18  89.583333  10.416667
##   19  95.575221   4.424779
##   21  93.506494   6.493506
##   22  95.266272   4.733728
##   23  98.113208   1.886792
##   24  95.149254   4.850746
##   25  94.117647   5.882353
##   26  89.506173  10.493827
##   27  94.318182   5.681818
##   28  95.205479   4.794521
##   29  90.950226   9.049774
##   2A  94.285714   5.714286
##   2B  83.333333  16.666667
##   30  93.370166   6.629834
##   31  94.930876   5.069124
##   32  97.368421   2.631579
##   33  93.065693   6.934307
##   34  92.610837   7.389163
##   35  89.787234  10.212766
##   36  85.074627  14.925373
##   37  87.837838  12.162162
##   38  86.685552  13.314448
##   39  92.727273   7.272727
##   40  99.122807   0.877193
##   41  94.074074   5.925926
##   42  86.842105  13.157895
##   43  95.238095   4.761905
##   44  96.938776   3.061224
##   45  92.156863   7.843137
##   46  98.165138   1.834862
##   47  95.402299   4.597701
##   48  88.888889  11.111111
##   49  96.734694   3.265306
##   50  94.117647   5.882353
##   51  91.489362   8.510638
##   52  95.121951   4.878049
##   53  95.522388   4.477612
##   54  93.641618   6.358382
##   55  88.709677  11.290323
##   56  97.000000   3.000000
##   57  91.034483   8.965517
##   58  98.780488   1.219512
##   59  93.333333   6.666667
##   60  94.514768   5.485232
##   61  86.363636  13.636364
##   62  93.870968   6.129032
##   63  70.744681  29.255319
##   64  97.385621   2.614379
##   65  92.592593   7.407407
##   66  96.899225   3.100775
##   67  90.714286   9.285714
##   68  97.641509   2.358491
##   69  89.565217  10.434783
##   70  91.139241   8.860759
##   71  98.214286   1.785714
##   72  88.059701  11.940299
##   73  92.118227   7.881773
##   74  94.642857   5.357143
##   75 100.000000   0.000000
##   76  96.564885   3.435115
##   77  91.245791   8.754209
##   78  96.153846   3.846154
##   79  95.412844   4.587156
##   80  98.675497   1.324503
##   81  95.161290   4.838710
##   82  98.936170   1.063830
##   83  86.861314  13.138686
##   84  93.805310   6.194690
##   85  94.930876   5.069124
##   86  94.814815   5.185185
##   87  91.666667   8.333333
##   88  94.594595   5.405405
##   89  95.862069   4.137931
##   90  97.435897   2.564103
##   91  95.918367   4.081633
##   92 100.000000   0.000000
##   93  97.500000   2.500000
##   94 100.000000   0.000000
##   95  90.410959   9.589041
##   97  89.610390  10.389610
\end{verbatim}
\begin{alltt}
\hlstd{> }\hlkwd{write.csv2}\hlstd{(}\hlkwd{as.data.frame.matrix}\hlstd{(res),}\hlkwc{file}\hlstd{=}\hlstr{"data/resultats2.csv"}\hlstd{)}
\end{alltt}
\end{kframe}
\end{knitrout}

\end{frame}





\end{document}
